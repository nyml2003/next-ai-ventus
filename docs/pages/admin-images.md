# 图片管理页设计

> 优先级：P1

## 页面目标

集中管理已上传的图片，支持查看、复制链接、删除等操作。

## 用户场景

| 场景 | 用户行为 |
|------|---------|
| 查找历史图片 | 浏览已上传图片列表，按时间筛选 |
| 复用图片 | 复制图片 URL，插入到新文章中 |
| 清理空间 | 删除不再使用的图片 |
| 批量管理 | 批量选择删除多张图片 |

## 模块清单

### 1. Sidebar（侧边导航）

与「管理首页」相同，当前选中「图片管理」

```
┌─────────────────┐
│   [头像]        │
│   张三          │
├─────────────────┤
│  📊 仪表盘      │
│  📝 文章管理    │
│  🖼️ 图片管理  ← │
│  ⚙️ 设置        │
├─────────────────┤
│  🚪 退出登录    │
└─────────────────┘
```

### 2. PageHeader（页面标题栏）

**功能：**
- 页面标题：图片管理
- 显示图片总数
- 上传入口按钮

**布局：**
```
┌─────────────────────────────────────────┐
│  图片管理（共 128 张）         [+ 上传]  │
└─────────────────────────────────────────┘
```

### 3. FilterBar（筛选栏）

**功能：**
- 时间筛选：全部 / 最近 7 天 / 最近 30 天 / 今年 / 去年
- 搜索框：按文件名搜索（可选）

**布局：**
```
┌─────────────────────────────────────────┐
│  [全部][7天][30天][今年][去年]   [🔍 搜索] │
└─────────────────────────────────────────┘
```

### 4. ImageGrid（图片网格）

**功能：**
- 网格展示图片缩略图
- 显示文件名和上传时间
- 支持选择多行进行批量操作

**网格项结构：**
```
┌──────────────┐
│              │
│   [图片      │
│    缩略图]   │
│              │
├──────────────┤
│ abc123.jpg   │
│ 2024-06-15   │
│ ☐ [复制][删除]│
└──────────────┘
```

**交互：**
- 点击图片放大预览
- 悬停显示操作按钮（复制链接、删除）
- 勾选框支持批量选择

### 5. ImagePreview（图片预览）

**功能：**
- 点击缩略图后弹出大图预览
- 显示图片完整信息和 URL

**布局：**
```
┌─────────────────────────────────────────┐
│                                         │
│         [  大图预览区域  ]               │
│                                         │
│   abc123.jpg                            │
│   2024-06-15 14:30:00                   │
│   1920x1080 · 1.2MB                     │
│                                         │
│   [复制 URL]  [删除]  [关闭]            │
│                                         │
└─────────────────────────────────────────┘
```

### 6. BatchActions（批量操作栏）

**功能：**
- 选中多张图片后显示批量操作栏

**布局：**
```
┌─────────────────────────────────────────┐
│  已选择 5 张    [批量删除] [取消]        │
└─────────────────────────────────────────┘
```

### 7. Pagination（分页器）

**功能：**
- 图片较多时分页展示
- 每页默认 20 张

## 页面布局

```
┌──────────────────────────────────────────────────────────┐
│  [ventus Logo]                    退出登录  [头像]        │
├───────────────┬──────────────────────────────────────────┤
│               │  PageHeader                              │
│   Sidebar     │  图片管理（共 128 张）          [+ 上传]  │
│               │                                          │
│  📊 仪表盘    ├──────────────────────────────────────────┤
│  📝 文章管理  │  FilterBar                               │
│  🖼️ 图片管理 ←│  [全部][7天][30天]              [搜索]    │
│  ⚙️ 设置      ├──────────────────────────────────────────┤
│               │                                          │
│               │  ImageGrid                               │
│               │  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐   │
│               │  │img1│ │img2│ │img3│ │img4│ │img5│   │
│               │  └────┘ └────┘ └────┘ └────┘ └────┘   │
│               │  ┌────┐ ┌────┐ ┌────┐ ┌────┐          │
│               │  │img6│ │img7│ │img8│ │img9│          │
│               │  └────┘ └────┘ └────┘ └────┘          │
│               │                                          │
│               │  Pagination                              │
│               │  [上一页] 1 2 3 ... 7 [下一页]            │
│               │                                          │
└───────────────┴──────────────────────────────────────────┘
```

## 空状态

### 无图片

```
┌─────────────────────────────────────────┐
│           图片管理             [+ 上传]   │
├─────────────────────────────────────────┤
│                                         │
│            🖼️ 还没有图片                │
│                                         │
│      点击右上角「上传」添加第一张图片      │
│                                         │
└─────────────────────────────────────────┘
```

### 筛选无结果

```
┌─────────────────────────────────────────┐
│  [全部][7天][30天]              [搜索]   │
├─────────────────────────────────────────┤
│                                         │
│            🔍 没有找到图片              │
│                                         │
│         尝试其他筛选条件                 │
│                                         │
│         [清除筛选条件]                   │
│                                         │
└─────────────────────────────────────────┘
```

## 交互细节

### 复制图片 URL

- 点击「复制」按钮
- Toast 提示「已复制到剪贴板」
- 复制的 URL 格式：`/uploads/2024/06/abc123.jpg`

### 删除确认

- 单张删除：弹出确认对话框「确定删除这张图片吗？」
- 批量删除：弹出确认对话框「确定删除选中的 5 张图片吗？」
- 确认后执行删除，刷新列表

### 上传入口

- 点击「上传」按钮打开文件选择器
- 支持多选批量上传
- 上传完成后自动刷新列表

## API 设计

### 获取图片列表

```http
GET /api/admin/images?page=1&limit=20&days=30&search=abc

Response:
{
  "code": 0,
  "data": {
    "items": [
      {
        "id": "abc123",
        "filename": "abc123.jpg",
        "url": "/uploads/2024/06/abc123.jpg",
        "width": 1920,
        "height": 1080,
        "size": 1234567,
        "createdAt": "2024-06-15T14:30:00Z"
      }
    ],
    "total": 128,
    "page": 1,
    "limit": 20
  }
}
```

### 删除图片

```http
DELETE /api/admin/images/:id

Response:
{
  "code": 0,
  "message": "删除成功"
}
```

### 批量删除

```http
POST /api/admin/images/batch-delete

{
  "ids": ["abc123", "def456", "ghi789"]
}

Response:
{
  "code": 0,
  "data": {
    "deleted": 3,
    "failed": 0
  }
}
```
