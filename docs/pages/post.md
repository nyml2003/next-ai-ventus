# 文章详情页设计

## 页面目标

提供沉浸式阅读体验，让读者专注于内容，同时提供相关推荐引导继续阅读。

## 用户场景

| 场景 | 用户行为 |
|------|---------|
| 深度阅读 | 阅读长文，使用目录导航到特定章节 |
| 代码学习 | 复制代码片段，查看代码高亮 |
| 延伸阅读 | 读完文章后，点击相关推荐继续阅读 |
| 返回列表 | 点击返回按钮，回到之前的列表位置 |

## 模块清单

### 1. Header（精简版）

**功能：**
- 返回按钮（回到列表页，保持之前的位置）
- 博客 Logo（点击回到首页）
- 主题切换按钮

**与普通 Header 的区别：**
- 隐藏导航链接，减少干扰
- 增加明显的返回按钮

### 2. Article（文章模块）

**BFF 模块：`article`**

BFF 返回完整文章数据，前端渲染时分为两个区域展示：

**2.1 ArticleMeta（标题区）**
- 文章标题（H1）
- 发布日期、预计阅读时间
- 标签列表（可点击筛选）

```
┌─────────────────────────────────────────┐
│                                         │
│   如何设计一个高性能的博客系统             │
│                                         │
│   2024-06-15 · 预计阅读 8 分钟           │
│   [架构] [Go] [性能优化]                 │
│                                         │
└─────────────────────────────────────────┘
```

**2.2 ArticleContent（正文区）**

**功能：**
- Markdown 渲染内容
- 代码高亮（支持复制按钮）
- 图片点击放大

**内容样式：**
- 正文：18px 字体，1.8 行高
- 代码块：14px 等宽字体，深色背景
- 引用块：左侧边框，灰色背景

> **设计说明**：`ArticleMeta` 和 `ArticleContent` 是前端组件层面的划分，不是独立的 BFF 模块。BFF 统一通过 `article` 模块返回完整文章数据。

### 3. TOC（目录导航）

**功能：**
- 自动提取文章标题生成目录
- 点击跳转到对应章节
- 高亮当前阅读位置

**布局：**
- 桌面端：右侧悬浮（固定位置）

**交互：**
- 滚动文章时，目录自动高亮当前章节
- 点击目录项，平滑滚动到对应位置

### 4. Related（相关推荐）

**功能：**
- 推荐 3-5 篇相关文章
- 基于标签匹配算法

**布局：**
```
┌─────────────────────────────────────────┐
│  相关阅读                                │
├─────────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐            │
│  │ 文章标题  │  │ 文章标题  │            │
│  │ 日期     │  │ 日期     │            │
│  └──────────┘  └──────────┘            │
└─────────────────────────────────────────┘
```

**相关算法（简化版）：**
- 找出与本文章标签重叠最多的其他文章
- 按时间倒序，优先展示较新的

### 5. Footer（文章页专用）

**功能：**
- 上一篇/下一篇导航
- 版权声明

**布局：**
```
┌─────────────────────────────────────────┐
│  ← 上一篇：xxx        下一篇：xxx →     │
├─────────────────────────────────────────┤
│  © 2024 张三. 转载请注明出处             │
└─────────────────────────────────────────┘
```

## 页面布局

### 桌面端（三栏布局）

```
┌──────────────────────────────────────────────────────────┐
│                      Header (精简)                        │
├──────────────────────────────────────────────────────────┤
│                                                          │
│                   ArticleMeta                            │
│                                                          │
├───────────────┬───────────────────────────┬──────────────┤
│               │                           │              │
│  (留白)       │       Article             │    TOC       │
│               │                           │   (悬浮)     │
│               │       正文内容...         │   - 引言     │
│               │       正文内容...         │   - 架构设计  │
│               │       正文内容...         │   - 性能优化  │
│               │                           │   - 总结     │
│               │                           │              │
├───────────────┴───────────────────────────┴──────────────┤
│                      Related                             │
├──────────────────────────────────────────────────────────┤
│                      Footer                              │
└──────────────────────────────────────────────────────────┘
```



## 交互细节

### 代码块

- 鼠标悬停显示「复制」按钮
- 点击复制，Toast 提示「已复制」
- 支持一键复制全部代码

### 图片

- 点击放大（Lightbox 效果）
- 支持左右切换（如果文章有多张图）

### 返回定位

- 从首页点击文章进入时，首页保存滚动位置到 sessionStorage
- 文章页点击返回时，首页恢复之前的滚动位置和筛选状态

## 空状态/异常

### 文章不存在

```
┌─────────────────────────────────────────┐
│              Header                     │
├─────────────────────────────────────────┤
│                                         │
│            😕 文章不存在                 │
│                                         │
│    可能已被删除或链接错误                │
│                                         │
│         [返回首页]                      │
│                                         │
└─────────────────────────────────────────┘
```
